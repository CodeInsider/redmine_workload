<%#
# Renders the workload data for one single project for one single user.
# Parameters:
#  * user: The user to render the data for.
#  * project: The project to render
#  * data: The data to render. A hash with issues as keys.
%>

<tr class="project-total-workload">
  <th class="project-description" scope="row"><%= project.to_s %> </th>
  <% # Print the total workload for this project for each day %>
  <%= render :partial => 'total_workload', :locals => {:totalWorkload => data[:total]} %>
</tr>
<% if @show_issues then %>
  <% # Iterate over all issues for the project %>
  <% issuesForUser = data.keys.select{|x| x.kind_of?(Issue)} %>
     <% issuesForUser.each_with_index do |issue, index| %>

     <%= render :partial => 'workload_for_issue', :locals => {:user => user, :issue => issue, :data => data[issue], :index => index} %>
  <% end %>
<% end %>